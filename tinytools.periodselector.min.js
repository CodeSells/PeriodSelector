(function(n){function o(t){return n.extend({defaultYear:2014,months:{},onYearClick:!1,onMonthClick:!1},t)}function i(n){return n.closest(".PeriodSelector").data("settings")}function s(t,i){var s=o({}),u,h,e,c;for(s=n.extend(s,f),i=n.extend(s,i),u='<div class="PeriodSelector">',u+=r(),h=a(i),e=0;e<h.length;e++)u+=r(h[e],i);u+="<\/div>";n(t).append(u);c=n(t).children().last();c.data("settings",i)}function r(n,t){var i='<div class="PeriodSelectorYearContent">',r=n==undefined?0:n;return i+='<div class="Year" onclick="$.periodSelector.yearClick('+r+', $(this));">'+(n==undefined?"Recent":n.toString())+"<\/div>",t!=undefined&&(i+=h(n,t)),i+"<\/div>"}function h(t,i){for(var o=v(t,i),u="",f,r=0;r<12;r++)f=n.inArray(r+1,o)>=0,u+='<div class="Month'+(f?' Active" onclick="$.periodSelector.monthClick('+(r+1)+", "+t+", $(this));":"")+'">'+e[r]+"<\/div>";return u}function c(n,t){return n>t?1:n==t?0:-1}function l(n,t){return n<t?1:n==t?0:-1}function a(t){for(var i=[],r=0;r<t.months.length;r++)n.inArray(t.months[r].year,i)<0&&i.push(t.months[r].year);return i.sort(l),i}function v(t,i){for(var u=[],r=0;r<i.months.length;r++)i.months[r].year==t&&n.inArray(i.months[r].month,u)<0&&u.push(i.months[r].month);return u.sort(c),u}function u(t,i,r){n.isFunction(t)&&t.call(undefined,i,r)}var t="periodSelector",f,e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","dec"];n.periodSelector||(publicMethod=n.fn[t]=n[t]=function(n){var t=n;return this.each(function(n,i){s(i,t)})},publicMethod.getSettings=function(n){return n.closest(".PeriodSelector").data("settings")},publicMethod.monthClick=function(n,t,r){u(i(r).onMonthClick,n,t,r)},publicMethod.yearClick=function(n,t){t.closest(".PeriodSelector").find(".Month").slideUp();t.hasClass("Selected")?t.removeClass("Selected"):(t.closest(".PeriodSelector").find(".Year").removeClass("Selected"),t.closest(".PeriodSelectorYearContent").children(".Month").slideDown(),t.addClass("Selected"));u(i(t).onYearClick,n,t)})})(jQuery,document,window);